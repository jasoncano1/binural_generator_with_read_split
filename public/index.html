<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Brainwave Binaural Generator</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Include Tone.js from CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.37/Tone.js"></script>
  <!-- Our JavaScript code -->
  <script src="script.js" defer></script>
</head>
<body>
  <!-- Fallback emergency speech button -->
  <button id="emergency-speech" onclick="emergencySpeech()" style="display: none; position: fixed; bottom: 10px; right: 10px; z-index: 9999; background-color: red; color: white; padding: 10px; border: none; border-radius: 5px;">
    Emergency Speech
  </button>

  <div class="container">
    <div class="header">
      <h1>Brainwave Binaural Generator</h1>
      <div class="header-buttons">
        <button id="theme-toggle" class="btn-theme" title="Toggle Dark Mode">
          <span id="theme-icon">üåô</span>
        </button>
        <button id="toggle-btn" class="btn-start">Start</button>
      </div>
    </div>

    <div id="speech-panel" class="speech-panel">
      <h3 class="speech-title">Custom Hypnosis Script</h3>
      <div class="script-buttons">
        <button id="day-script-btn" class="script-btn active">Day Script</button>
        <button id="night-script-btn" class="script-btn">Night Script</button>
      </div>
      <textarea id="speech-text" class="speech-textarea"
        placeholder="Enter your custom hypnosis script here. It will be read aloud over the binaural beats. You can paste in the quantum coding script or write your own affirmations."></textarea>
      <div class="speech-controls">
        <button id="speak-btn" class="btn-speech">Read Script</button>
        <button id="stop-speech-btn" class="btn-speech-stop" disabled>Stop Reading</button>
        <div class="speech-options">
          <label class="speech-checkbox">
            <input type="checkbox" id="loop-speech-checkbox">
            Loop Speech
          </label>
          <label class="speech-label">
            Voice:
            <select id="voice-select" class="speech-select">
              <option value="">Loading voices...</option>
            </select>
          </label>
          <label class="speech-label">
            Rate:
            <input type="range" id="rate-slider" min="0.5" max="1.5" step="0.1" value="0.8">
            <span id="rate-value">0.8</span>
          </label>
          <label class="speech-label">
            Volume:
            <input type="range" id="speech-volume-slider" min="0" max="1" step="0.1" value="0.7">
            <span id="speech-volume-value">0.7</span>
          </label>
        </div>
      </div>
    </div>

    <div class="wave-buttons">
      <button id="delta-btn" class="wave-btn" style="background-color: #6366f1;">Delta</button>
      <button id="theta-btn" class="wave-btn active" style="background-color: #3b82f6;">Theta</button>
      <button id="alpha-btn" class="wave-btn" style="background-color: #22c55e;">Alpha</button>
      <button id="lowBeta-btn" class="wave-btn" style="background-color: #eab308;">Low Beta</button>
      <button id="midBeta-btn" class="wave-btn" style="background-color: #f97316;">Mid Beta</button>
      <button id="highBeta-btn" class="wave-btn" style="background-color: #ef4444;">High Beta</button>
      <button id="gamma-btn" class="wave-btn" style="background-color: #a855f7;">Gamma</button>
    </div>

    <div class="control-group">
      <label class="control-label" id="carrier-label">Carrier Frequency: 200 Hz</label>
      <div class="frequency-options">
        <button id="freq-200" class="freq-btn active">200 Hz</button>
        <button id="freq-1000" class="freq-btn">1000 Hz</button>
        <button id="freq-custom" class="freq-btn">Custom</button>
      </div>
      <div id="custom-range" class="custom-range">
        <div class="range-container">
          <input type="range" id="carrier-slider" min="100" max="2000" step="10" value="200">
          <div class="range-labels">
            <span>100 Hz</span>
            <span>2000 Hz</span>
          </div>
        </div>
      </div>
    </div>

    <div class="control-group">
      <label class="control-label" id="beat-label">Binaural Beat (Theta): 6.0 Hz</label>
      <div class="range-container">
        <input type="range" id="beat-slider" min="4" max="8" step="0.1" value="6.0">
        <div class="range-labels">
          <span id="beat-min">4 Hz</span>
          <span id="beat-max">8 Hz</span>
        </div>
      </div>
    </div>

    <div class="control-group">
      <label class="control-label" id="volume-label">Volume: -20 dB</label>
      <div class="range-container">
        <input type="range" id="volume-slider" min="-40" max="0" step="1" value="-20">
        <div class="range-labels">
          <span>Quiet</span>
          <span>Loud</span>
        </div>
      </div>
    </div>

    <div id="playing-indicator" class="playing-indicator">
      <p class="playing-text">Audio playing: 200Hz carrier with 6.0Hz binaural beat</p>
      <p class="playing-details">Left ear: 200Hz | Right ear: 206Hz</p>
      <p class="playing-details">Remember: You must use headphones to hear binaural beats properly</p>
    </div>

    <h2 class="info-title" id="current-wave-title">Current Wave: Theta</h2>
    <div class="info-panel">
      <p class="info-description" id="wave-description">Deep meditation, REM sleep, creativity</p>
      <h3 class="info-subtitle">How to Use</h3>
      <ul class="info-list">
        <li><strong>HEADPHONES REQUIRED</strong> - binaural beats only work with stereo headphones</li>
        <li>Click the "Start" button and allow audio permissions if prompted</li>
        <li>If no sound, check your volume settings and make sure headphones are connected</li>
        <li>Try increasing the volume slider and your device volume</li>
        <li>Find a quiet, comfortable space</li>
        <li>Start with 10-30 minute sessions</li>
        <li>Different brainwaves support different mental states</li>
      </ul>
    </div>

    <div class="troubleshooting">
      <h3 class="troubleshooting-title">‚ö†Ô∏è Audio Troubleshooting</h3>
      <ol class="troubleshooting-list">
        <li>Make sure your device's volume is turned up</li>
        <li>Use headphones (required for binaural effects)</li>
        <li>Click the Start button and allow any audio permissions</li>
        <li>You should hear a brief test tone when starting</li>
        <li>Increase the volume slider above if needed</li>
      </ol>
      <div class="divider"></div>
      <p class="troubleshooting-title" style="margin-top: 8px;">About Carrier Frequencies:</p>
      <ul class="troubleshooting-list" style="font-size: 0.75rem;">
        <li>200 Hz: Traditional carrier, works well for most people</li>
        <li>1000 Hz: Higher carrier, may be more perceptible to some</li>
        <li>Custom: Choose your preferred carrier frequency</li>
        <li>Note: The binaural effect occurs from the frequency difference between ears</li>
      </ul>
    </div>
  </div>
</body>
</html>
